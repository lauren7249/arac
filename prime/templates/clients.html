{% extends 'base.html' %}
{% block content %}
<div class='overlay'>
  <div id='client-list'>
      <h2>Create A Client List</h2>
      <form action='' method='POST'>
        <input type='text' name='name' class='form-group' placeholder='Enter in the list name' />
        <button class='btn btn-success'>Create List</button>
      </form>
  </div>
</div>
<div class='row'>
  <div class='sidebar'>
    <div class='inner'>
      <ul>
        <li><a href='/dashboard'><span></span>New Prospects</a></li>
        <li><a class='active' href='/clients'><span></span>Your Clients</a></li>
      </ul>
    </div>
  </div>
  <div class='items'>
    <div class='welcome'>
      <h1>Your Clients <a href='javascript:showCreateForm();'><div class='pull-right'><button class='btn btn-success'>Create List</button></a></div></h1>
      <p>Add clients to a list to export, bulk email and track your performance.</p>
    </div>
    <div class='padding'>
      <table class="table table-striped table-hover ">
        {% if client_lists %}
        <thead>
          <tr>
            <th>Client List</th>
            <th>Status</th>
            <th>Prospect Count (Max 50)</th>
            <th>View List</th>
          </tr>
        </thead>
        {% for client_list in client_lists %}
        <tbody>
        <tr>
          <td>{{ client_list.name }}</td>
          <td>Created</td>
          <td>{{ client_list.prospect_count }}</td>
          <td><a href='/clients/{{ client_list.id }}'>View List</a></td>
        </tr>
        {% endfor %}
        {% else %}
        <tr>
          <td><h2 class='empty'>Go to the dashboard to add clients</h2></td>
        </tr>
        {% endif %}
        </tbody>
      </table>
      <div class='pagination'>
        {% if prospects %}
        <p>{% if prospects.has_prev %}<a href="{{ company.get_url }}?p={{ prospects.prev_num }}"><< Previous Page</a>{% endif %}
        {% if prospects.has_next %}<a href="{{ company.get_url }}?p={{ prospects.next_num }}">Next Page >></a>{% endif %}</p>
        {% endif %}
      </div>
    </div>
  </div>
</div>
<script src="/static/js/chart.js" type="text/javascript"></script>
<script src="//platform.linkedin.com/in.js" type="text/javascript"></script>
<script type='text/javascript'>
var searchType;
$(function() {
    $("#search-submit").click(function() {
      searchType = $('#search-type').val();
      if (searchType == 1) {
        searchType = "schools"
      } else {
        searchType = "companys"
      }
      var term = $("#term").val()
      $(".search-page-results").show();
      $(".search-page-results").load("/elastic_search?type=" + searchType +"&term=" + term, function() {
        bindButtons();
      })
    });
});

function bindButtons() {
  $("[data-name]").click(function() {
      var dataId = $(this).data("id");
      var dataName = $(this).data("name")
      if (searchType == "companys") {
        window.location = "/search?company_id=" + dataId;
      } else {
        window.location = "/search?school_id=" + dataId;
      }
  });
}

function showCreateForm() {
  $(".overlay").fadeIn();
}

</script>
{% endblock %}
